<header class="nav-root" [class.scrolled]="scrolled">
    <nav class="nav container">
      <a routerLink="/home" class="brand">
        <img src="https://cdn.prod.website-files.com/67f0b3883b003d5b40abd974/67f74edab1afdf10f240750b_Sellifyx.svg" alt="logo">
      </a>
      <button class="hamburger" (click)="open = !open" aria-label="menu">â˜°</button>
      <div class="right">
        <div class="cart-icon">
          <span>{{ cartService.getTotalQuantity() }}</span>
          <a (click)="openCart()" style="cursor: pointer;">
            <img src="https://cdn.prod.website-files.com/67f0b3883b003d5b40abd974/67ff5135b6a0574126b4e3b7_Cart%20Icon.svg" alt="cart">
          </a>
        </div>

        <ul class="nav-links" [class.open]="open">
          <li><a routerLink="/product/all" (click)="open=false">Store</a></li>
          <li><a routerLink="/about" (click)="open=true">About</a></li>
          <li><a routerLink="/support" (click)="open=true">Support</a></li>
          <li><a routerLink="/blogs" (click)="open=true">Blog</a></li>
          <li><a routerLink="/contact" (click)="open=true">Contact</a></li>
        </ul>

      
        <div class="search-box" (click)="open=true">
            <svg class="search-icon" width="30px" height="30px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M11 6C13.7614 6 16 8.23858 16 11M16.6588 16.6549L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="#878787" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
            <input type="text">
            <button type="submit" class="search-btn">Search</button>
        </div>

        <div class="header-user" (click)="toggleDropdown()">
            <svg width="30px" height="30px" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                <path d="M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21
                        M16 7C16 9.20914 14.2091 11 12 11
                        C9.79086 11 8 9.20914 8 7
                        C8 4.79086 9.79086 3 12 3
                        C14.2091 3 16 4.79086 16 7Z"
                        stroke="#000000" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>

            <div class="user-dropdown" *ngIf="showDropdown">
                <ng-container *ngIf="user; else loginOption">
                    <a routerLink="/profile"><p>Welcome, {{ username }}</p></a>
                    <button (click)="logout()">Logout</button>
                </ng-container>

                <ng-template #loginOption>
                    <button (click)="goToLogin()">Login</button>
                </ng-template>
                </div>   
                
                <div class="wishlist">
            <a routerLink="/wishlist">
                <img src="https://www.svgrepo.com/show/532468/heart-alt.svg" alt="">
            </a>
        </div>

            </div>
            
     
    </div>
    </nav>
            
   
  </header>

<!-- checkout.component.html -->
<div class="checkout-container">
  <div class="checkout-header">
    <h1>Checkout</h1>
    <p>Complete your purchase securely</p>
  </div>

  <div class="checkout-content">
    <!-- Order Summary -->
    <div class="order-summary">
      <h3>Order Summary</h3> 
      <div class="cart-items">
        <div *ngFor="let item of cartItems" class="cart-item">
            <!-- modified image  -->
         <img [src]="item.image" [alt]="item.name" class="item-image">
          <div class="item-details">
            <h4>{{ item.name }}</h4>
            <p>Quantity: {{ item.quantity }}</p>
            <p class="price">{{ item.price * item.quantity | currency }}</p>
          </div>
        </div>
      </div>
      <div class="order-total">
        <h3>Total: {{ subtotal | currency }}</h3>
      </div>
    </div>

    <!-- Checkout Form -->
    <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()" class="checkout-form">
      <!-- Personal Information -->
      <div class="form-section">
        <h3>Personal Information</h3>
        <div class="form-row">
          <div class="form-group">
            <label>First Name *</label>
            <input type="text" formControlName="firstName" placeholder="John">
            <div *ngIf="formControls['firstName'].touched && formControls['firstName'].invalid" class="error">
              Valid first name is required
            </div>
          </div>
          <div class="form-group">
            <label>Last Name *</label>
            <input type="text" formControlName="lastName" placeholder="Doe">
            <div *ngIf="formControls['lastName'].touched && formControls['lastName'].invalid" class="error">
              Valid last name is required
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Email Address *</label>
            <input type="email" formControlName="email" placeholder="john.doe@example.com">
            <div *ngIf="formControls['email'].touched && formControls['email'].invalid" class="error">
              Valid email is required
            </div>
          </div>
          <div class="form-group">
            <label>Phone Number *</label>
            <input type="tel" formControlName="phone" placeholder="(555) 123-4567">
            <div *ngIf="formControls['phone'].touched && formControls['phone'].invalid" class="error">
              Valid phone number is required
            </div>
          </div>
        </div>
      </div>

      <!-- Shipping Address -->
      <div class="form-section">
        <h3>Shipping Address</h3>
        <div class="form-group">
          <label>Address *</label>
          <input type="text" formControlName="address" placeholder="123 Main St">
          <div *ngIf="formControls['address'].touched && formControls['address'].invalid" class="error">
            Address is required
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>City *</label>
            <input type="text" formControlName="city" placeholder="New York">
            <div *ngIf="formControls['city'].touched && formControls['city'].invalid" class="error">
              City is required
            </div>
          </div>
          <div class="form-group">
            <label>State *</label>
            <input type="text" formControlName="state" placeholder="NY">
            <div *ngIf="formControls['state'].touched && formControls['state'].invalid" class="error">
              State is required
            </div>
          </div>
          <div class="form-group">
            <label>ZIP Code *</label>
            <input type="text" formControlName="zipCode" placeholder="10001">
            <div *ngIf="formControls['zipCode'].touched && formControls['zipCode'].invalid" class="error">
              Valid ZIP code is required
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label>Country *</label>
          <select formControlName="country">
            <option value="">Select Country</option>
            <option value="US">United States</option>
            <option value="CA">Canada</option>
            <option value="UK">United Kingdom</option>
            <!-- Add more countries as needed -->
          </select>
          <div *ngIf="formControls['country'].touched && formControls['country'].invalid" class="error">
            Country is required
          </div>
        </div>
      </div>

      <!-- Payment Information -->
      <div class="form-section">
        <h3>Payment Information</h3>
        <div class="form-group">
          <label>Name on Card *</label>
          <input type="text" formControlName="cardName" placeholder="John Doe">
          <div *ngIf="formControls['cardName'].touched && formControls['cardName'].invalid" class="error">
            Name on card is required
          </div>
        </div>
        
        <div class="form-group">
          <label>Card Number *</label>
          <input type="text" formControlName="cardNumber" placeholder="1234 5678 9012 3456" maxlength="16">
          <div *ngIf="formControls['cardNumber'].touched && formControls['cardNumber'].invalid" class="error">
            Valid card number is required
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Expiry Date *</label>
            <input type="text" formControlName="expiryDate" placeholder="MM/YY" maxlength="5">
            <div *ngIf="formControls['expiryDate'].touched && formControls['expiryDate'].invalid" class="error">
              Valid expiry date required (MM/YY)
            </div>
          </div>
          <div class="form-group">
            <label>CVV *</label>
            <input type="text" formControlName="cvv" placeholder="123" maxlength="4">
            <div *ngIf="formControls['cvv'].touched && formControls['cvv'].invalid" class="error">
              Valid CVV is required
            </div>
          </div>
        </div>
      </div>

      <!-- Additional Options -->
      <div class="form-section">
        <div class="form-check">
          <input type="checkbox" formControlName="sameAsShipping" id="sameAsShipping">
          <label for="sameAsShipping">Billing address same as shipping</label>
        </div>
        
        <div class="form-check">
          <input type="checkbox" formControlName="saveInfo" id="saveInfo">
          <label for="saveInfo">Save payment information for next time</label>
        </div>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="submit-btn" [disabled]="loading">
        {{ loading ? 'Processing...' : 'Complete Order (' + ( subtotal | currency) + ')' }}
      </button>
    </form>
  </div>
</div>