<!-- checkout.component.html -->
<div class="checkout-container">
  <div class="checkout-header">
    <h1>Checkout</h1>
    <p>Complete your purchase securely</p>
  </div>

  <div class="checkout-content">
    <!-- Order Summary -->
    <div class="order-summary">
      <h3>Order Summary</h3>
      <div class="cart-items">
        <div *ngFor="let item of cartItems" class="cart-item">
            <!-- modified image  -->
         <img [src]="item.image" [alt]="item.name" class="item-image">
          <div class="item-details">
            <h4>{{ item.name }}</h4>
            <p>Quantity: {{ item.quantity }}</p>
            <p class="price">{{ item.price * item.quantity | currency }}</p>
          </div>
        </div>
      </div>
      <div class="order-total">
        <h3>Total: {{ subtotal | currency }}</h3>
      </div>
    </div>

    <!-- Checkout Form -->
    <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()" class="checkout-form">
      <!-- Personal Information -->
      <div class="form-section">
        <h3>Personal Information</h3>
        <div class="form-row">
          <div class="form-group">
            <label>First Name *</label>
            <input type="text" formControlName="firstName" placeholder="John">
            <div *ngIf="formControls['firstName'].touched && formControls['firstName'].invalid" class="error">
              Valid first name is required
            </div>
          </div>
          <div class="form-group">
            <label>Last Name *</label>
            <input type="text" formControlName="lastName" placeholder="Doe">
            <div *ngIf="formControls['lastName'].touched && formControls['lastName'].invalid" class="error">
              Valid last name is required
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Email Address *</label>
            <input type="email" formControlName="email" placeholder="john.doe@example.com">
            <div *ngIf="formControls['email'].touched && formControls['email'].invalid" class="error">
              Valid email is required
            </div>
          </div>
          <div class="form-group">
            <label>Phone Number *</label>
            <input type="tel" formControlName="phone" placeholder="(555) 123-4567">
            <div *ngIf="formControls['phone'].touched && formControls['phone'].invalid" class="error">
              Valid phone number is required
            </div>
          </div>
        </div>
      </div>

      <!-- Shipping Address -->
      <div class="form-section">
        <h3>Shipping Address</h3>
        <div class="form-group">
          <label>Address *</label>
          <input type="text" formControlName="address" placeholder="123 Main St">
          <div *ngIf="formControls['address'].touched && formControls['address'].invalid" class="error">
            Address is required
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>City *</label>
            <input type="text" formControlName="city" placeholder="New York">
            <div *ngIf="formControls['city'].touched && formControls['city'].invalid" class="error">
              City is required
            </div>
          </div>
          <div class="form-group">
            <label>State *</label>
            <input type="text" formControlName="state" placeholder="NY">
            <div *ngIf="formControls['state'].touched && formControls['state'].invalid" class="error">
              State is required
            </div>
          </div>
          <div class="form-group">
            <label>ZIP Code *</label>
            <input type="text" formControlName="zipCode" placeholder="10001">
            <div *ngIf="formControls['zipCode'].touched && formControls['zipCode'].invalid" class="error">
              Valid ZIP code is required
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label>Country *</label>
          <select formControlName="country">
            <option value="">Select Country</option>
            <option value="US">United States</option>
            <option value="CA">Canada</option>
            <option value="UK">United Kingdom</option>
            <!-- Add more countries as needed -->
          </select>
          <div *ngIf="formControls['country'].touched && formControls['country'].invalid" class="error">
            Country is required
          </div>
        </div>
      </div>

      <!-- Payment Information -->
      <div class="form-section">
        <h3>Payment Information</h3>
        <div class="form-group">
          <label>Name on Card *</label>
          <input type="text" formControlName="cardName" placeholder="John Doe">
          <div *ngIf="formControls['cardName'].touched && formControls['cardName'].invalid" class="error">
            Name on card is required
          </div>
        </div>
        
        <div class="form-group">
          <label>Card Number *</label>
          <input type="text" formControlName="cardNumber" placeholder="1234 5678 9012 3456" maxlength="16">
          <div *ngIf="formControls['cardNumber'].touched && formControls['cardNumber'].invalid" class="error">
            Valid card number is required
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Expiry Date *</label>
            <input type="text" formControlName="expiryDate" placeholder="MM/YY" maxlength="5">
            <div *ngIf="formControls['expiryDate'].touched && formControls['expiryDate'].invalid" class="error">
              Valid expiry date required (MM/YY)
            </div>
          </div>
          <div class="form-group">
            <label>CVV *</label>
            <input type="text" formControlName="cvv" placeholder="123" maxlength="4">
            <div *ngIf="formControls['cvv'].touched && formControls['cvv'].invalid" class="error">
              Valid CVV is required
            </div>
          </div>
        </div>
      </div>

      <!-- Additional Options -->
      <div class="form-section">
        <div class="form-check">
          <input type="checkbox" formControlName="sameAsShipping" id="sameAsShipping">
          <label for="sameAsShipping">Billing address same as shipping</label>
        </div>
        
        <div class="form-check">
          <input type="checkbox" formControlName="saveInfo" id="saveInfo">
          <label for="saveInfo">Save payment information for next time</label>
        </div>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="submit-btn" [disabled]="loading">
        {{ loading ? 'Processing...' : 'Complete Order (' + ( subtotal | currency) + ')' }}
      </button>
    </form>
  </div>
</div>